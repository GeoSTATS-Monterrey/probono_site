{"version":3,"sources":["../src/select.tsx"],"sourcesContent":["import React, {type ForwardedRef, forwardRef, type ReactNode} from 'react';\nimport {useSelectState, type SelectStateOptions} from 'react-stately';\nimport {useObjectRef} from '@react-aria/utils';\nimport {\n\tuseSelect,\n\ttype AriaSelectProps,\n\tHiddenSelect,\n\ttype Placement,\n} from 'react-aria';\nimport ArrowDropDown from '@material-design-icons/svg/round/arrow_drop_down.svg';\nimport Button from './button/button.tsx';\nimport Popover from './popover.tsx';\nimport ListBox from './list-box.tsx';\nimport {cx} from './cva.ts';\n\nexport type SelectProps<T extends Record<string, unknown>> = {\n\treadonly className?: string;\n\treadonly placeholder?: ReactNode;\n\treadonly popoverPlacement?: Placement;\n} & AriaSelectProps<T> &\n\tSelectStateOptions<T>;\n\nconst Select = forwardRef(function Select<T extends Record<string, unknown>>(\n\tprops: SelectProps<T>,\n\tref: ForwardedRef<HTMLButtonElement>,\n) {\n\tconst {\n\t\tclassName,\n\t\tlabel,\n\t\tisDisabled,\n\t\tname,\n\t\tplaceholder,\n\t\tisRequired,\n\t\tpopoverPlacement = 'bottom start',\n\t} = props;\n\tconst state = useSelectState({\n\t\tvalidationBehavior: 'native',\n\t\t...props,\n\t});\n\tconst {selectedItem, isFocused, isOpen} = state;\n\n\tconst triggerRef = useObjectRef(ref);\n\n\tconst {\n\t\tlabelProps,\n\t\ttriggerProps,\n\t\tvalueProps,\n\t\tmenuProps,\n\t\tisInvalid,\n\t\tvalidationErrors,\n\t\terrorMessageProps,\n\t} = useSelect(\n\t\t{\n\t\t\tvalidationBehavior: 'native',\n\t\t\t...props,\n\t\t},\n\t\tstate,\n\t\ttriggerRef,\n\t);\n\n\treturn (\n\t\t<div className={cx('w-fit group', className)}>\n\t\t\t{label && (\n\t\t\t\t<div\n\t\t\t\t\t{...labelProps}\n\t\t\t\t\tdata-disabled={isDisabled}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t'text-stone-400 text-sm mb-1 data-[disabled=true]:text-stone-500 transition-color',\n\t\t\t\t\t\t(isFocused || isOpen) && 'text-stone-50',\n\t\t\t\t\t\tisRequired && 'after:content-[\"*\"] after:ms-0.5',\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<HiddenSelect\n\t\t\t\tisDisabled={isDisabled}\n\t\t\t\tstate={state}\n\t\t\t\ttriggerRef={triggerRef}\n\t\t\t\tlabel={label}\n\t\t\t\tname={name}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\t{...triggerProps}\n\t\t\t\tref={triggerRef}\n\t\t\t\tvariant='outlined'\n\t\t\t\tisDisabled={isDisabled}\n\t\t\t\tclassName={cx(\n\t\t\t\t\t'w-full flex group-focus-within:glow',\n\t\t\t\t\tisOpen && 'glow-sm shadow-stone-800 border-stone-50',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<span {...valueProps} className='grow text-left'>\n\t\t\t\t\t{selectedItem\n\t\t\t\t\t\t? selectedItem.rendered\n\t\t\t\t\t\t: placeholder ?? 'Selecciona una opci√≥n'}\n\t\t\t\t</span>\n\t\t\t\t<ArrowDropDown aria-hidden='true' className='fill-current' />\n\t\t\t</Button>\n\t\t\t{isOpen && (\n\t\t\t\t<Popover\n\t\t\t\t\tstate={state}\n\t\t\t\t\ttriggerRef={triggerRef}\n\t\t\t\t\tplacement={popoverPlacement}\n\t\t\t\t>\n\t\t\t\t\t{/** @ts-expect-error children not necessary **/}\n\t\t\t\t\t<ListBox\n\t\t\t\t\t\t{...menuProps}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\tclassName='max-h-96'\n\t\t\t\t\t/>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t\t{isInvalid && (\n\t\t\t\t<div\n\t\t\t\t\t{...errorMessageProps}\n\t\t\t\t\tclassName='mt-1 text-xs text-red-400'\n\t\t\t\t>\n\t\t\t\t\t{validationErrors.join(' ')}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n});\n\nexport default Select;\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA,SAAkC,kBAAiC;AACnE,SAAQ,sBAA8C;AAEtD;AAAA,EACC;AAAA,EAEA;AAAA,OAEM;AACP,OAAO,mBAAmB;AAsDtB,cAmBD,YAnBC;AAzCJ,IAAM,SAAS,WAAW,SAASA,QAClC,OACA,KACC;AACD,QAAM;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,mBAAmB;AAAA,EACpB,IAAI;AACJ,QAAM,QAAQ,eAAe;AAAA,IAC5B,oBAAoB;AAAA,IACpB,GAAG;AAAA,EACJ,CAAC;AACD,QAAM,EAAC,cAAc,WAAW,OAAM,IAAI;AAE1C,QAAM,aAAa,0CAAa,GAAG;AAEnC,QAAM;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,IAAI;AAAA,IACH;AAAA,MACC,oBAAoB;AAAA,MACpB,GAAG;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAEA,SACC,qBAAC,SAAI,WAAW,GAAG,eAAe,SAAS,GACzC;AAAA,aACA;AAAA,MAAC;AAAA;AAAA,QACC,GAAG;AAAA,QACJ,iBAAe;AAAA,QACf,WAAW;AAAA,UACV;AAAA,WACC,aAAa,WAAW;AAAA,UACzB,cAAc;AAAA,QACf;AAAA,QAEC;AAAA;AAAA,IACF;AAAA,IAED;AAAA,MAAC;AAAA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;AAAA,IACD;AAAA,IACA;AAAA,MAAC;AAAA;AAAA,QACC,GAAG;AAAA,QACJ,KAAK;AAAA,QACL,SAAQ;AAAA,QACR;AAAA,QACA,WAAW;AAAA,UACV;AAAA,UACA,UAAU;AAAA,QACX;AAAA,QAEA;AAAA,8BAAC,UAAM,GAAG,YAAY,WAAU,kBAC9B,yBACE,aAAa,WACb,eAAe,4BACnB;AAAA,UACA,oBAAC,iBAAc,eAAY,QAAO,WAAU,gBAAe;AAAA;AAAA;AAAA,IAC5D;AAAA,IACC,UACA;AAAA,MAAC;AAAA;AAAA,QACA;AAAA,QACA;AAAA,QACA,WAAW;AAAA,QAGX;AAAA,UAAC;AAAA;AAAA,YACC,GAAG;AAAA,YACJ;AAAA,YACA,WAAU;AAAA;AAAA,QACX;AAAA;AAAA,IACD;AAAA,IAEA,aACA;AAAA,MAAC;AAAA;AAAA,QACC,GAAG;AAAA,QACJ,WAAU;AAAA,QAET,2BAAiB,KAAK,GAAG;AAAA;AAAA,IAC3B;AAAA,KAEF;AAEF,CAAC;AAED,IAAO,iBAAQ;","names":["Select"]}