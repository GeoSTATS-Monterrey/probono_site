{"version":3,"sources":["../src/form/form-submit-listener.tsx"],"sourcesContent":["import {useFormStatus} from 'react-dom';\nimport {useEffect} from 'react';\nimport {type ToastContent, useToasts} from '@/toast.tsx';\nimport {type FormState} from '@/form/form.tsx';\n\ntype FormSubmitListenerProps<T> = {\n\treadonly state: FormState<T>;\n\treadonly successToast: ToastContent;\n};\n\nexport function FormSubmitListener<T>(props: FormSubmitListenerProps<T>) {\n\tconst {successToast, state} = props;\n\n\tconst {pending} = useFormStatus();\n\tconst {add} = useToasts();\n\n\tuseEffect(() => {\n\t\tif (state.success && !pending) {\n\t\t\tadd(successToast, {timeout: 3000});\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [state.success, pending]);\n\n\treturn null;\n}\n"],"mappings":";;;;;;;;;;;AAAA,uBAA4B;AAC5B,SAAQ,iBAAgB;AASjB,SAAS,mBAAsB,OAAmC;AACxE,QAAM,EAAC,cAAc,MAAK,IAAI;AAE9B,QAAM,EAAC,QAAO,QAAI,gCAAc;AAChC,QAAM,EAAC,IAAG,IAAI,UAAU;AAExB,YAAU,MAAM;AACf,QAAI,MAAM,WAAW,CAAC,SAAS;AAC9B,UAAI,cAAc,EAAC,SAAS,IAAI,CAAC;AAAA,IAClC;AAAA,EAED,GAAG,CAAC,MAAM,SAAS,OAAO,CAAC;AAE3B,SAAO;AACR;","names":[]}