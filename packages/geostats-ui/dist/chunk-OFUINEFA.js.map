{"version":3,"sources":["../src/hooks/use-immutable-list-data.ts"],"sourcesContent":["import {\n\ttype Key,\n\ttype ListData,\n\ttype ListOptions,\n\tuseListData,\n} from 'react-stately';\nimport {List, Set} from 'immutable';\nimport {useMemo} from 'react';\n\nexport type ImmutableListOptions<T> = Omit<ListOptions<T>, 'initialItems'> & {\n\treadonly initialItems?: Iterable<T>;\n};\n\nexport type ImmutableListData<T> = Omit<\n\tListData<T>,\n\t'items' | 'selectedKeys' | 'setSelectedKeys'\n> & {\n\treadonly items: List<T>;\n\treadonly selectedKeys: Set<Key> | 'all';\n\treadonly setSelectedKeys: (keys: Set<Key> | 'all') => void;\n};\n\nexport default function useImmutableListData<T>(\n\toptions: ImmutableListOptions<T>,\n): ImmutableListData<T> {\n\tconst listData = useListData<T>({\n\t\t...options,\n\t\tinitialItems:\n\t\t\toptions.initialItems === undefined\n\t\t\t\t? undefined\n\t\t\t\t: [...options.initialItems],\n\t});\n\n\tconst items = useMemo(() => List(listData.items), [listData.items]);\n\n\tconst selectedKeys = useMemo(() => {\n\t\tconst {selectedKeys} = listData;\n\t\tif (selectedKeys === 'all') {\n\t\t\treturn 'all';\n\t\t}\n\n\t\treturn Set(selectedKeys);\n\t}, [listData]);\n\n\treturn {\n\t\t...listData,\n\t\titems,\n\t\tselectedKeys,\n\t\tsetSelectedKeys(keys: 'all' | Set<Key>) {\n\t\t\tif (keys === 'all') {\n\t\t\t\tlistData.setSelectedKeys('all');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// @ts-expect-error should not need the string conversion symbol\n\t\t\tlistData.setSelectedKeys(keys);\n\t\t},\n\t};\n}\n"],"mappings":";AAAA;AAAA,EAIC;AAAA,OACM;AACP,SAAQ,MAAM,WAAU;AACxB,SAAQ,eAAc;AAeP,SAAR,qBACN,SACuB;AACvB,QAAM,WAAW,YAAe;AAAA,IAC/B,GAAG;AAAA,IACH,cACC,QAAQ,iBAAiB,SACtB,SACA,CAAC,GAAG,QAAQ,YAAY;AAAA,EAC7B,CAAC;AAED,QAAM,QAAQ,QAAQ,MAAM,KAAK,SAAS,KAAK,GAAG,CAAC,SAAS,KAAK,CAAC;AAElE,QAAM,eAAe,QAAQ,MAAM;AAClC,UAAM,EAAC,cAAAA,cAAY,IAAI;AACvB,QAAIA,kBAAiB,OAAO;AAC3B,aAAO;AAAA,IACR;AAEA,WAAO,IAAIA,aAAY;AAAA,EACxB,GAAG,CAAC,QAAQ,CAAC;AAEb,SAAO;AAAA,IACN,GAAG;AAAA,IACH;AAAA,IACA;AAAA,IACA,gBAAgB,MAAwB;AACvC,UAAI,SAAS,OAAO;AACnB,iBAAS,gBAAgB,KAAK;AAC9B;AAAA,MACD;AAGA,eAAS,gBAAgB,IAAI;AAAA,IAC9B;AAAA,EACD;AACD;","names":["selectedKeys"]}