{"version":3,"sources":["../src/combo-box.tsx"],"sourcesContent":["import React, {type ReactNode, useRef} from 'react';\nimport {type AriaComboBoxProps, useComboBox} from 'react-aria';\nimport {\n\ttype ComboBoxState,\n\ttype ComboBoxStateOptions,\n\tuseComboBoxState,\n} from 'react-stately';\nimport ArrowDropDown from '@material-design-icons/svg/round/arrow_drop_down.svg';\nimport {BaseListBox} from './list-box.tsx';\nimport Button from './button/button.tsx';\nimport Popover from './popover.tsx';\nimport {cx} from './cva.ts';\n\nexport type ComboBoxProps<T extends Record<string, unknown>> =\n\t| StatefulComboBoxProps<T>\n\t| BaseComboBoxProps<T>;\n\nexport default function ComboBox<T extends Record<string, unknown>>(\n\tprops: ComboBoxProps<T>,\n) {\n\treturn 'state' in props ? (\n\t\t<BaseComboBox {...props} />\n\t) : (\n\t\t<StatefulComboBox {...props} />\n\t);\n}\n\nexport type StatefulComboBoxProps<T extends Record<string, unknown>> = Omit<\n\tBaseComboBoxProps<T>,\n\t'state'\n> &\n\tComboBoxStateOptions<T>;\n\nexport function StatefulComboBox<T extends Record<string, unknown>>(\n\tprops: StatefulComboBoxProps<T>,\n) {\n\tconst state = useComboBoxState<T>(props);\n\n\treturn <BaseComboBox {...props} state={state} />;\n}\n\nexport type BaseComboBoxProps<T extends Record<string, unknown>> = {\n\treadonly icon?: ReactNode;\n\treadonly className?: string;\n\treadonly state: ComboBoxState<T>;\n} & AriaComboBoxProps<T>;\n\nexport function BaseComboBox<T extends Record<string, unknown>>(\n\tprops: BaseComboBoxProps<T>,\n) {\n\tconst {icon, state, className} = props;\n\n\tconst buttonObjectRef = useRef<HTMLButtonElement>(null);\n\tconst inputObjectRef = useRef<HTMLInputElement>(null);\n\tconst listBoxObjectRef = useRef<HTMLUListElement>(null);\n\tconst popoverObjectRef = useRef<HTMLDivElement>(null);\n\n\tconst {buttonProps, inputProps, listBoxProps, labelProps} = useComboBox<T>(\n\t\t{\n\t\t\t...props,\n\t\t\tinputRef: inputObjectRef,\n\t\t\tbuttonRef: buttonObjectRef,\n\t\t\tlistBoxRef: listBoxObjectRef,\n\t\t\tpopoverRef: popoverObjectRef,\n\t\t},\n\t\tstate,\n\t);\n\n\treturn (\n\t\t<div className={cx('group w-fit', className)}>\n\t\t\t<label\n\t\t\t\t{...labelProps}\n\t\t\t\tclassName='mb-1 text-sm text-stone-300 transition-colors group-focus-within:text-stone-50'\n\t\t\t>\n\t\t\t\t{props.label}\n\t\t\t</label>\n\t\t\t<div className='flex w-full rounded border border-stone-700 bg-stone-950 text-stone-300 transition-all group-focus-within:border-stone-50 group-focus-within:shadow-stone-800 group-focus-within:glow-sm'>\n\t\t\t\t{icon}\n\t\t\t\t<input\n\t\t\t\t\t{...inputProps}\n\t\t\t\t\tref={inputObjectRef}\n\t\t\t\t\tclassName='grow bg-transparent p-1 outline-0 placeholder:text-stone-500'\n\t\t\t\t/>\n\t\t\t\t<Button {...buttonProps} ref={buttonObjectRef} variant='text'>\n\t\t\t\t\t<ArrowDropDown\n\t\t\t\t\t\taria-hidden='true'\n\t\t\t\t\t\tclassName='fill-current'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t{state.isOpen ? (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tref={popoverObjectRef}\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\ttriggerRef={inputObjectRef}\n\t\t\t\t\t\tplacement='bottom start'\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* @ts-expect-error children prop is passed in by react-aria */}\n\t\t\t\t\t\t<BaseListBox\n\t\t\t\t\t\t\t{...listBoxProps}\n\t\t\t\t\t\t\tlistBoxRef={listBoxObjectRef}\n\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\tclassName='max-h-96'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Popover>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"mappings":";;;;;;;;;;;;;;AAAA,SAA+B,cAAa;AAC5C,SAAgC,mBAAkB;AAClD;AAAA,EAGC;AAAA,OACM;AACP,OAAO,mBAAmB;AAcxB,cAuDC,YAvDD;AAJa,SAAR,SACN,OACC;AACD,SAAO,WAAW,QACjB,oBAAC,gBAAc,GAAG,OAAO,IAEzB,oBAAC,oBAAkB,GAAG,OAAO;AAE/B;AAQO,SAAS,iBACf,OACC;AACD,QAAM,QAAQ,iBAAoB,KAAK;AAEvC,SAAO,oBAAC,gBAAc,GAAG,OAAO,OAAc;AAC/C;AAQO,SAAS,aACf,OACC;AACD,QAAM,EAAC,MAAM,OAAO,UAAS,IAAI;AAEjC,QAAM,kBAAkB,OAA0B,IAAI;AACtD,QAAM,iBAAiB,OAAyB,IAAI;AACpD,QAAM,mBAAmB,OAAyB,IAAI;AACtD,QAAM,mBAAmB,OAAuB,IAAI;AAEpD,QAAM,EAAC,aAAa,YAAY,cAAc,WAAU,IAAI;AAAA,IAC3D;AAAA,MACC,GAAG;AAAA,MACH,UAAU;AAAA,MACV,WAAW;AAAA,MACX,YAAY;AAAA,MACZ,YAAY;AAAA,IACb;AAAA,IACA;AAAA,EACD;AAEA,SACC,qBAAC,SAAI,WAAW,GAAG,eAAe,SAAS,GAC1C;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,GAAG;AAAA,QACJ,WAAU;AAAA,QAET,gBAAM;AAAA;AAAA,IACR;AAAA,IACA,qBAAC,SAAI,WAAU,4LACb;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,GAAG;AAAA,UACJ,KAAK;AAAA,UACL,WAAU;AAAA;AAAA,MACX;AAAA,MACA,oBAAC,kBAAQ,GAAG,aAAa,KAAK,iBAAiB,SAAQ,QACtD;AAAA,QAAC;AAAA;AAAA,UACA,eAAY;AAAA,UACZ,WAAU;AAAA;AAAA,MACX,GACD;AAAA,MACC,MAAM,SACN;AAAA,QAAC;AAAA;AAAA,UACA,KAAK;AAAA,UACL;AAAA,UACA,YAAY;AAAA,UACZ,WAAU;AAAA,UAGV;AAAA,YAAC;AAAA;AAAA,cACC,GAAG;AAAA,cACJ,YAAY;AAAA,cACZ;AAAA,cACA,WAAU;AAAA;AAAA,UACX;AAAA;AAAA,MACD,IACG;AAAA,OACL;AAAA,KACD;AAEF;","names":[]}