{"version":3,"sources":["../src/toast.tsx"],"sourcesContent":["'use client';\nimport React, {createContext, type ReactNode, useContext, useRef} from 'react';\nimport {type ToastState, useToastState} from '@react-stately/toast';\nimport {\n\ttype AriaToastProps,\n\ttype AriaToastRegionProps,\n\tuseToast,\n\tuseToastRegion,\n} from '@react-aria/toast';\nimport {AnimatePresence, motion, type Variants} from 'framer-motion';\nimport {omit} from 'lodash';\nimport Close from '@material-design-icons/svg/round/close.svg';\nimport Button from './button/button.tsx';\nimport {cx} from './cva.ts';\n\nexport type ToastContent = {\n\tvariant?: 'success' | 'warn' | 'error';\n\ttitle: string;\n\ticon?: ReactNode;\n\tdescription?: string;\n};\n\ntype ToastProps = {\n\treadonly state: ToastState<ToastContent>;\n} & AriaToastProps<ToastContent>;\n\nconst toastVariants: Variants = {\n\tentering: {\n\t\topacity: 1,\n\t\ttop: 'auto',\n\t\tbottom: 'auto',\n\t\tright: 0,\n\t},\n\tinitial: {\n\t\topacity: 1,\n\t\ttop: 'auto',\n\t\tbottom: 128,\n\t\tright: 0,\n\t},\n\tinitialQueued: {\n\t\topacity: 0,\n\t\ttop: 256,\n\t\tright: 0,\n\t\tbottom: 'auto',\n\t},\n\texiting: {\n\t\tright: '-110%',\n\t},\n};\n\nfunction Toast(props: ToastProps) {\n\tconst {state, toast} = props;\n\tconst {animation, content} = toast;\n\tconst {title, description, icon, variant = 'success'} = content;\n\tconst ref = useRef<HTMLDivElement>(null);\n\tconst {toastProps, titleProps, descriptionProps, closeButtonProps} =\n\t\tuseToast(props, state, ref);\n\n\treturn (\n\t\t<motion.div\n\t\t\t{...omit(toastProps, [\n\t\t\t\t'onAnimationEnd',\n\t\t\t\t'onAnimationStart',\n\t\t\t\t'onDragStart',\n\t\t\t\t'onDragEnd',\n\t\t\t\t'onDrag',\n\t\t\t])}\n\t\t\tref={ref}\n\t\t\tlayout\n\t\t\tinitial={animation === 'queued' ? 'initialQueued' : 'initial'}\n\t\t\tanimate='entering'\n\t\t\texit='exiting'\n\t\t\tvariants={toastVariants}\n\t\t\tclassName={cx(\n\t\t\t\t'rounded flex p-2 items-center gap-2 relative max-w-2xl',\n\t\t\t\tvariant === 'success' && 'bg-green-400',\n\t\t\t\tvariant === 'error' && 'bg-red-400',\n\t\t\t\tvariant === 'warn' && 'bg-yellow-400',\n\t\t\t)}\n\t\t>\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\t{...titleProps}\n\t\t\t\t\tclassName='flex gap-1 font-semibold text-stone-800'\n\t\t\t\t>\n\t\t\t\t\t{icon}\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t\t{description && (\n\t\t\t\t\t<div {...descriptionProps} className='text-stone-700'>\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{!toast.timeout && (\n\t\t\t\t<Button\n\t\t\t\t\t{...closeButtonProps}\n\t\t\t\t\tvariant='text'\n\t\t\t\t\tsize='xs'\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t'text-stone-800',\n\t\t\t\t\t\tvariant === 'success' && 'enabled:hover:bg-green-500',\n\t\t\t\t\t\tvariant === 'warn' && 'enabled:hover:bg-yellow-500',\n\t\t\t\t\t\tvariant === 'error' && 'enabled:hover:bg-red-500',\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<Close className='fill-current' />\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</motion.div>\n\t);\n}\n\ntype ToastRegionProps = {\n\treadonly state: ToastState<ToastContent>;\n} & AriaToastRegionProps;\n\nfunction ToastRegion(props: ToastRegionProps) {\n\tconst {state} = props;\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst {regionProps} = useToastRegion(props, state, ref);\n\treturn (\n\t\t<motion.div\n\t\t\t{...omit(regionProps, [\n\t\t\t\t'onAnimationEnd',\n\t\t\t\t'onAnimationStart',\n\t\t\t\t'onDragStart',\n\t\t\t\t'onDragEnd',\n\t\t\t\t'onDrag',\n\t\t\t])}\n\t\t\tref={ref}\n\t\t\tlayout\n\t\t\tclassName='fixed bottom-4 right-4 z-[1050] flex flex-col gap-4 outline-none'\n\t\t>\n\t\t\t<AnimatePresence>\n\t\t\t\t{state.visibleToasts.map(toast => (\n\t\t\t\t\t<Toast key={toast.key} toast={toast} state={state} />\n\t\t\t\t))}\n\t\t\t</AnimatePresence>\n\t\t</motion.div>\n\t);\n}\n\nconst toastContext = createContext<ToastState<ToastContent> | null>(null);\n\nexport function useToasts() {\n\tconst toasts = useContext(toastContext);\n\tif (toasts === null) {\n\t\tthrow new Error('useToast must be called within a ToastProvider');\n\t}\n\n\treturn toasts;\n}\n\nexport type ToastProviderProps = {\n\treadonly children: ReactNode;\n};\n\nexport function ToastProvider(props: ToastProviderProps) {\n\tconst {children} = props;\n\tconst state = useToastState<ToastContent>({\n\t\tmaxVisibleToasts: 5,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<toastContext.Provider value={state}>\n\t\t\t\t{children}\n\t\t\t</toastContext.Provider>\n\t\t\t<ToastRegion {...props} state={state} />\n\t\t</>\n\t);\n}\n"],"mappings":";;;;;;;;AACA,SAAe,eAA+B,YAAY,cAAa;AACvE,SAAyB,qBAAoB;AAC7C;AAAA,EAGC;AAAA,EACA;AAAA,OACM;AACP,SAAQ,iBAAiB,cAA4B;AACrD,SAAQ,YAAW;AACnB,OAAO,WAAW;AAsEd,SAsFF,UA9EG,KARD;AAvDJ,IAAM,gBAA0B;AAAA,EAC/B,UAAU;AAAA,IACT,SAAS;AAAA,IACT,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,OAAO;AAAA,EACR;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,OAAO;AAAA,EACR;AAAA,EACA,eAAe;AAAA,IACd,SAAS;AAAA,IACT,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,EACT;AAAA,EACA,SAAS;AAAA,IACR,OAAO;AAAA,EACR;AACD;AAEA,SAAS,MAAM,OAAmB;AACjC,QAAM,EAAC,OAAO,MAAK,IAAI;AACvB,QAAM,EAAC,WAAW,QAAO,IAAI;AAC7B,QAAM,EAAC,OAAO,aAAa,MAAM,UAAU,UAAS,IAAI;AACxD,QAAM,MAAM,OAAuB,IAAI;AACvC,QAAM,EAAC,YAAY,YAAY,kBAAkB,iBAAgB,IAChE,SAAS,OAAO,OAAO,GAAG;AAE3B,SACC;AAAA,IAAC,OAAO;AAAA,IAAP;AAAA,MACC,GAAG,KAAK,YAAY;AAAA,QACpB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD,CAAC;AAAA,MACD;AAAA,MACA,QAAM;AAAA,MACN,SAAS,cAAc,WAAW,kBAAkB;AAAA,MACpD,SAAQ;AAAA,MACR,MAAK;AAAA,MACL,UAAU;AAAA,MACV,WAAW;AAAA,QACV;AAAA,QACA,YAAY,aAAa;AAAA,QACzB,YAAY,WAAW;AAAA,QACvB,YAAY,UAAU;AAAA,MACvB;AAAA,MAEA;AAAA,6BAAC,SACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,GAAG;AAAA,cACJ,WAAU;AAAA,cAET;AAAA;AAAA,gBACA;AAAA;AAAA;AAAA,UACF;AAAA,UACC,eACA,oBAAC,SAAK,GAAG,kBAAkB,WAAU,kBACnC,uBACF;AAAA,WAEF;AAAA,QAEC,CAAC,MAAM,WACP;AAAA,UAAC;AAAA;AAAA,YACC,GAAG;AAAA,YACJ,SAAQ;AAAA,YACR,MAAK;AAAA,YACL,WAAW;AAAA,cACV;AAAA,cACA,YAAY,aAAa;AAAA,cACzB,YAAY,UAAU;AAAA,cACtB,YAAY,WAAW;AAAA,YACxB;AAAA,YAEA,8BAAC,SAAM,WAAU,gBAAe;AAAA;AAAA,QACjC;AAAA;AAAA;AAAA,EAEF;AAEF;AAMA,SAAS,YAAY,OAAyB;AAC7C,QAAM,EAAC,MAAK,IAAI;AAChB,QAAM,MAAM,OAAuB,IAAI;AAEvC,QAAM,EAAC,YAAW,IAAI,eAAe,OAAO,OAAO,GAAG;AACtD,SACC;AAAA,IAAC,OAAO;AAAA,IAAP;AAAA,MACC,GAAG,KAAK,aAAa;AAAA,QACrB;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACD,CAAC;AAAA,MACD;AAAA,MACA,QAAM;AAAA,MACN,WAAU;AAAA,MAEV,8BAAC,mBACC,gBAAM,cAAc,IAAI,WACxB,oBAAC,SAAsB,OAAc,SAAzB,MAAM,GAAiC,CACnD,GACF;AAAA;AAAA,EACD;AAEF;AAEA,IAAM,eAAe,cAA+C,IAAI;AAEjE,SAAS,YAAY;AAC3B,QAAM,SAAS,WAAW,YAAY;AACtC,MAAI,WAAW,MAAM;AACpB,UAAM,IAAI,MAAM,gDAAgD;AAAA,EACjE;AAEA,SAAO;AACR;AAMO,SAAS,cAAc,OAA2B;AACxD,QAAM,EAAC,SAAQ,IAAI;AACnB,QAAM,QAAQ,cAA4B;AAAA,IACzC,kBAAkB;AAAA,EACnB,CAAC;AAED,SACC,iCACC;AAAA,wBAAC,aAAa,UAAb,EAAsB,OAAO,OAC5B,UACF;AAAA,IACA,oBAAC,eAAa,GAAG,OAAO,OAAc;AAAA,KACvC;AAEF;","names":[]}